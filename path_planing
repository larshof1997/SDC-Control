import osmnx as ox
import networkx as nx
import matplotlib.pyplot as plt

# Step 1: Load OSM Data
osm_file = "/Users/lars/Downloads/Github/SDC-Control/sdc_track_lelystad.osm"  # Replace "your_osm_file.osm" with the path to your OSM file
graph = ox.io.load_graphml(osm_file)

# Step 2: Path Planning Algorithm
def shortest_path(graph, source, target):
    return nx.shortest_path(graph, source=source, target=target, weight='length')

# Step 3: Visualization
def visualize_graph(graph, path=None):
    ox.plot_graph(graph, node_size=0, edge_color='k', bgcolor='w', show=False)
    if path:
        ox.plot_graph_route(graph, path, route_color='r', route_linewidth=6, route_alpha=0.5, orig_dest_size=100)
    plt.show()

# Example usage
source_node = 12345
target_node = 67890
shortest_path_nodes = shortest_path(graph, source_node, target_node)
visualize_graph(graph, shortest_path_nodes)